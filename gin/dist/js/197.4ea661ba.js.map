{"version":3,"file":"js/197.4ea661ba.js","mappings":"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","sources":["webpack://chatroom/./node_modules/vue-loader/dist/exportHelper.js","webpack://chatroom/./src/components/routeMask.vue","webpack://chatroom/./src/components/routeMask.vue?d00e","webpack://chatroom/./src/views/signup.vue","webpack://chatroom/./src/views/signup.vue?688f"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","<template>\r\n  <div id=\"routeMask\">\r\n    加载中...\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'routeMask',\r\n  data() {\r\n    return {\r\n      routeMaskEle: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.routeMaskEle = document.querySelector('#routeMask')\r\n    setTimeout(() => {\r\n      this.routeMaskEle.classList.add('enter')\r\n      setTimeout(() => {\r\n        this.routeMaskEle.classList.add('waiting')\r\n        this.routeMaskEle.classList.remove('enter')\r\n      }, 300)\r\n    }, 100)\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#routeMask {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #2d2d2d;\r\n  z-index: 99;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: white;\r\n\r\n  &.enter {\r\n    transition: all 0.1s ease-in-out;\r\n    right: 100%;\r\n  }\r\n\r\n  &.waiting {\r\n    right: -100%;\r\n  }\r\n\r\n  &.leave {\r\n    transition: all 0.1s ease-in-out;\r\n    right: 0;\r\n  }\r\n}\r\n</style>","import { render } from \"./routeMask.vue?vue&type=template&id=eec74f86\"\nimport script from \"./routeMask.vue?vue&type=script&lang=js\"\nexport * from \"./routeMask.vue?vue&type=script&lang=js\"\n\nimport \"./routeMask.vue?vue&type=style&index=0&id=eec74f86&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- eslint-disable vue/multi-word-component-names -->\r\n<template>\r\n  <routeMask />\r\n  <div class=\"container\">\r\n    <h1>作为此聊天室的新用户进入</h1>\r\n    <el-form @submit.prevent=\"send\">\r\n      <div class=\"inputBox id\">\r\n        <input v-model=\"idValue\" class=\"input\" placeholder=\"取一个独特的id\" />\r\n        <span>此项不能为空</span>\r\n      </div>\r\n      <div class=\"inputBox password\">\r\n        <input v-model=\"passwordValue\" class=\"input\" placeholder=\"取一个安全的密码\" />\r\n        <span>此项不能为空</span>\r\n      </div>\r\n      <div class=\"inputBox name\">\r\n        <input v-model=\"nameValue\" class=\"input\" placeholder=\"输入你的昵称\" />\r\n        <span>此项不能为空</span>\r\n      </div>\r\n      <div class=\"inputBox title\">\r\n        <input v-model=\"titleValue\" class=\"input\" placeholder=\"给自己一个头衔吧，不过有没有无所谓了\" />\r\n      </div>\r\n      <button id=\"loginBtn\" class=\"loginBtn\" @click=\"login\">去登录</button>\r\n      <button id=\"submitBtn\" class=\"submitBtn\" type=\"submit\">注册</button>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport routeMask from '../components/routeMask.vue'\r\nimport { onMounted, ref } from 'vue'\r\nimport request from '../axios'\r\nimport { useRouter } from 'vue-router'\r\nimport { getStatus } from '@/utils/getStatus';\r\nimport { ElMessage } from 'element-plus';\r\nconst router = useRouter();\r\n// const route = useRoute();\r\n// import { ElMessage } from 'element-plus'\r\n\r\nconst idValue = ref('')\r\nconst passwordValue = ref('')\r\nconst nameValue = ref('')\r\nconst titleValue = ref('')\r\nconst isIdUsed = ref(false)\r\n\r\nconst login = () => {\r\n  const routeMask = document.querySelector('#routeMask')\r\n  routeMask.classList.add('leave')\r\n  routeMask.classList.remove('waiting')\r\n  setTimeout(() => {\r\n    router.push('/login')\r\n  }, 200)\r\n}\r\n\r\nconst send = () => {\r\n  nameValue.value = nameValue.value.trim()\r\n  passwordValue.value = passwordValue.value.trim()\r\n  idValue.value = idValue.value.trim()\r\n  titleValue.value = titleValue.value.trim()\r\n\r\n  if (nameValue.value === '') {\r\n    const nameEle = document.querySelector('.name')\r\n    nameEle.classList.remove('hasValue')\r\n    nameEle.classList.add('error')\r\n    nameEle.querySelector('input').addEventListener('input', () => {\r\n      nameEle.classList.remove('error')\r\n    })\r\n  }\r\n  if (passwordValue.value === '') {\r\n    const passwordEle = document.querySelector('.password')\r\n    passwordEle.classList.remove('hasValue')\r\n    passwordEle.classList.add('error')\r\n    passwordEle.querySelector('input').addEventListener('input', () => {\r\n      passwordEle.classList.remove('error')\r\n    })\r\n  }\r\n  if (idValue.value === '') {\r\n    const idEle = document.querySelector('.id')\r\n    idEle.querySelector('span').innerHTML = '此项不能为空'\r\n    idEle.classList.remove('hasValue')\r\n    idEle.classList.add('error')\r\n    idEle.querySelector('input').addEventListener('input', () => {\r\n      idEle.classList.remove('error')\r\n    })\r\n  }\r\n\r\n  if (titleValue.value === '') {\r\n    const titleEle = document.querySelector('.title')\r\n    titleEle.classList.remove('hasValue')\r\n  }\r\n\r\n  if (nameValue.value === '' || passwordValue.value === '' || idValue.value === '' || isIdUsed.value) {\r\n    return\r\n  }\r\n\r\n  const req = new FormData()\r\n\r\n  req.append('id', idValue.value)\r\n  req.append('password', passwordValue.value)\r\n  req.append('name', nameValue.value)\r\n  req.append('title', titleValue.value)\r\n\r\n  request.post('/signup', req, {}).then(res => {\r\n    console.log(res)\r\n    if (res.code == 200) {\r\n      const routeMaskEle = document.querySelector('#routeMask')\r\n      routeMaskEle.classList.add('leave')\r\n      routeMaskEle.classList.remove('waiting')\r\n      ElMessage.success('注册成功')\r\n      setTimeout(() => {\r\n        router.push('/login')\r\n      }, 200)\r\n    }\r\n  })\r\n}\r\n\r\nonMounted(() => {\r\n  getStatus()\r\n  const inputs = document.querySelectorAll('.input')\r\n  inputs.forEach((input) => {\r\n    input.addEventListener('input', () => {\r\n      if (input.value !== '') {\r\n        input.parentElement.classList.add('hasValue')\r\n      } else {\r\n        input.parentElement.classList.remove('hasValue')\r\n      }\r\n    })\r\n  })\r\n\r\n  const idEle = document.querySelector('.id .input')\r\n  const errorEle = document.querySelector('.id span')\r\n  idEle.addEventListener('input', () => {\r\n    request.post('/checkIdUsed',{'id': idValue.value}, {}).then(res => {\r\n      console.log(res)\r\n      if (res.code === '501') {\r\n        errorEle.innerHTML = '此id已被使用'\r\n        idEle.parentElement.classList.remove('hasValue')\r\n        idEle.parentElement.classList.add('error')\r\n        isIdUsed.value = true\r\n      } else {\r\n        errorEle.innerHTML = '此id可用'\r\n        idEle.parentElement.classList.remove('error')\r\n        isIdUsed.value = false\r\n      }\r\n    })\r\n  })\r\n})\r\n\r\n</script>\r\n\r\n<style>\r\n.container,\r\n.el-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  width: 100%;\r\n}\r\n\r\n.inputBox {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: start;\r\n  width: 80%;\r\n  margin: 0.3em 0;\r\n\r\n  .input {\r\n    width: calc(100% - 2em);\r\n    height: 2.3em;\r\n    padding: 0 1em;\r\n    border-radius: 2em;\r\n    border: 0;\r\n    border-bottom: 5px solid rgb(169, 169, 169);\r\n    transition: all 0.3s ease-in-out;\r\n  }\r\n\r\n  span {\r\n    opacity: 0;\r\n    color: rgb(203, 66, 66);\r\n    font-size: 0.8em;\r\n    margin: 0.1em 0 0 0.5em;\r\n    transition: all 0.3s ease-in-out;\r\n  }\r\n\r\n  &.error {\r\n    .input {\r\n      border-color: rgb(203, 66, 66);\r\n    }\r\n\r\n    span {\r\n      opacity: 1;\r\n    }\r\n  }\r\n\r\n  &.hasValue {\r\n    .input {\r\n      border-color: rgb(98, 149, 110);\r\n    }\r\n  }\r\n}\r\n\r\nbutton {\r\n  width: 80%;\r\n  height: 3em;\r\n  border-radius: 2em;\r\n  margin: 0.8em 0;\r\n  background-color: rgb(98, 149, 110);\r\n  border: 2px solid rgb(98, 149, 110);\r\n  color: white;\r\n  cursor: pointer;\r\n\r\n  &.loginBtn {\r\n    margin-top: 3em;\r\n    background-color: rgba(214, 255, 224, 0.496);\r\n  }\r\n}\r\n</style>","import script from \"./signup.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./signup.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./signup.vue?vue&type=style&index=0&id=5161e7e0&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","id","_createElementBlock","_hoisted_1","name","data","routeMaskEle","mounted","this","document","querySelector","setTimeout","classList","add","remove","__exports__","render","router","useRouter","idValue","ref","passwordValue","nameValue","titleValue","isIdUsed","login","routeMask","push","send","value","trim","nameEle","addEventListener","passwordEle","idEle","innerHTML","titleEle","req","FormData","append","request","post","then","res","console","log","code","ElMessage","success","onMounted","getStatus","inputs","querySelectorAll","forEach","input","parentElement","errorEle"],"sourceRoot":""}