"use strict";(self["webpackChunkchatroom"]=self["webpackChunkchatroom"]||[]).push([[254],{1241:function(e,t){t.A=(e,t)=>{const s=e.__vccOpts||e;for(const[a,l]of t)s[a]=l;return s}},3531:function(e,t,s){s.d(t,{A:function(){return i}});var a=s(6768);const l={id:"routeMask"};function n(e,t,s,n,u,r){return(0,a.uX)(),(0,a.CE)("div",l," 加载中... ")}var u={name:"routeMask",data(){return{routeMaskEle:null}},mounted(){this.routeMaskEle=document.querySelector("#routeMask"),setTimeout((()=>{this.routeMaskEle.classList.add("enter"),setTimeout((()=>{this.routeMaskEle.classList.add("waiting"),this.routeMaskEle.classList.remove("enter")}),300)}),100)}},r=s(1241);const o=(0,r.A)(u,[["render",n]]);var i=o},6254:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});s(4114),s(8992),s(3949);var a=s(6768),l=s(5130),n=s(3531),u=s(144),r=s(9294),o=s(1387),i=s(1219);const c={class:"container"},d={class:"inputBox id"},v={class:"inputBox password"},p={class:"inputBox name"},m={class:"inputBox title"};var L={__name:"signup",setup(e){const t=(0,o.rd)(),s=(0,u.KR)(""),L=(0,u.KR)(""),k=(0,u.KR)(""),h=(0,u.KR)(""),f=(0,u.KR)(!1),b=(0,u.KR)(null),y=(e,t)=>{let s;return(...a)=>{clearTimeout(s),s=setTimeout((()=>e.apply(this,a)),t)}},E=()=>{s.value="";const e=document.querySelector("#routeMask");e.classList.add("leave"),e.classList.remove("waiting"),setTimeout((()=>{t.push("/login")}),200)},M=()=>{if(k.value=k.value.trim(),L.value=L.value.trim(),s.value=s.value.trim(),h.value=h.value.trim(),""===k.value){const e=document.querySelector(".name");e.classList.remove("hasValue"),e.classList.add("error"),e.querySelector("input").addEventListener("input",(()=>{e.classList.remove("error")}))}if(""===L.value){const e=document.querySelector(".password");e.classList.remove("hasValue"),e.classList.add("error"),e.querySelector("input").addEventListener("input",(()=>{e.classList.remove("error")}))}if(""===s.value){const e=document.querySelector(".id");e.querySelector("span").innerHTML="此项不能为空",e.classList.remove("hasValue"),e.classList.add("error"),e.querySelector("input").addEventListener("input",(()=>{e.classList.remove("error")}))}if(""===h.value){const e=document.querySelector(".title");e.classList.remove("hasValue")}if(""===k.value||""===L.value||""===s.value||f.value)return;b.value.setAttribute("disabled",!0),b.value.innerHTML="注册中...";const e=new FormData;e.append("id",s.value),e.append("password",L.value),e.append("name",k.value),e.append("title",h.value),r.A.post("/signup",e,{}).then((e=>{if(console.log(e),200==e.code){const e=document.querySelector("#routeMask");e.classList.add("leave"),e.classList.remove("waiting"),i.nk.success("注册成功"),setTimeout((()=>{t.push("/login")}),200)}})).finally((()=>{b.value.removeAttribute("disabled"),b.value.innerHTML="注册"}))};return(0,a.sV)((()=>{const e=document.querySelectorAll(".input");e.forEach((e=>{e.addEventListener("input",(()=>{""!==e.value?e.parentElement.classList.add("hasValue"):e.parentElement.classList.remove("hasValue")}))}));const t=document.querySelector(".id .input"),a=document.querySelector(".id span"),l=y((()=>{s.value.trim()?r.A.post("/checkIdUsed",{id:s.value},{}).then((e=>{"501"===e.code?(a.innerHTML="此id已被使用",t.parentElement.classList.remove("hasValue"),t.parentElement.classList.add("error"),f.value=!0):(a.innerHTML="此id可用",t.parentElement.classList.remove("error"),f.value=!1)})):a.innerHTML="此项不能为空"}),500);t.addEventListener("input",l)})),(e,t)=>{const u=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(n.A),(0,a.Lk)("div",c,[t[7]||(t[7]=(0,a.Lk)("h1",null,"作为此聊天室的新用户进入",-1)),(0,a.bF)(u,{onSubmit:(0,l.D$)(M,["prevent"])},{default:(0,a.k6)((()=>[(0,a.Lk)("div",d,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),class:"input",placeholder:"取一个独特的id"},null,512),[[l.Jo,s.value]]),t[4]||(t[4]=(0,a.Lk)("span",null,"此项不能为空",-1))]),(0,a.Lk)("div",v,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>L.value=e),class:"input",placeholder:"取一个安全的密码"},null,512),[[l.Jo,L.value]]),t[5]||(t[5]=(0,a.Lk)("span",null,"此项不能为空",-1))]),(0,a.Lk)("div",p,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>k.value=e),class:"input",placeholder:"输入你的昵称"},null,512),[[l.Jo,k.value]]),t[6]||(t[6]=(0,a.Lk)("span",null,"此项不能为空",-1))]),(0,a.Lk)("div",m,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>h.value=e),class:"input",placeholder:"给自己一个头衔吧，不过有没有无所谓了"},null,512),[[l.Jo,h.value]])]),(0,a.Lk)("button",{id:"loginBtn",class:"loginBtn",onClick:E,type:"reset"},"去登录"),(0,a.Lk)("button",{ref_key:"submitBtn",ref:b,id:"submitBtn",class:"submitBtn",type:"submit"},"注册",512)])),_:1})])],64)}}};const k=L;var h=k}}]);
//# sourceMappingURL=254.11542852.js.map