{"version":3,"file":"js/254.11542852.js","mappings":"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","sources":["webpack://chatroom/./node_modules/vue-loader/dist/exportHelper.js","webpack://chatroom/./src/components/routeMask.vue","webpack://chatroom/./src/components/routeMask.vue?d00e","webpack://chatroom/./src/views/signup.vue","webpack://chatroom/./src/views/signup.vue?688f"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","<template>\r\n  <div id=\"routeMask\">\r\n    加载中...\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'routeMask',\r\n  data() {\r\n    return {\r\n      routeMaskEle: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.routeMaskEle = document.querySelector('#routeMask')\r\n    setTimeout(() => {\r\n      this.routeMaskEle.classList.add('enter')\r\n      setTimeout(() => {\r\n        this.routeMaskEle.classList.add('waiting')\r\n        this.routeMaskEle.classList.remove('enter')\r\n      }, 300)\r\n    }, 100)\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#routeMask {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #2d2d2d;\r\n  z-index: 99;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: white;\r\n\r\n  &.enter {\r\n    transition: all 0.1s ease-in-out;\r\n    right: 100%;\r\n  }\r\n\r\n  &.waiting {\r\n    right: -100%;\r\n  }\r\n\r\n  &.leave {\r\n    transition: all 0.1s ease-in-out;\r\n    right: 0;\r\n  }\r\n}\r\n</style>","import { render } from \"./routeMask.vue?vue&type=template&id=eec74f86\"\nimport script from \"./routeMask.vue?vue&type=script&lang=js\"\nexport * from \"./routeMask.vue?vue&type=script&lang=js\"\n\nimport \"./routeMask.vue?vue&type=style&index=0&id=eec74f86&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- eslint-disable vue/multi-word-component-names -->\r\n<template>\r\n  <routeMask />\r\n  <div class=\"container\">\r\n    <h1>作为此聊天室的新用户进入</h1>\r\n    <el-form @submit.prevent=\"send\">\r\n      <div class=\"inputBox id\">\r\n        <input v-model=\"idValue\" class=\"input\" placeholder=\"取一个独特的id\" />\r\n        <span>此项不能为空</span>\r\n      </div>\r\n      <div class=\"inputBox password\">\r\n        <input v-model=\"passwordValue\" class=\"input\" placeholder=\"取一个安全的密码\" />\r\n        <span>此项不能为空</span>\r\n      </div>\r\n      <div class=\"inputBox name\">\r\n        <input v-model=\"nameValue\" class=\"input\" placeholder=\"输入你的昵称\" />\r\n        <span>此项不能为空</span>\r\n      </div>\r\n      <div class=\"inputBox title\">\r\n        <input v-model=\"titleValue\" class=\"input\" placeholder=\"给自己一个头衔吧，不过有没有无所谓了\" />\r\n      </div>\r\n      <button id=\"loginBtn\" class=\"loginBtn\" @click=\"login\" type=\"reset\">去登录</button>\r\n      <button ref=\"submitBtn\" id=\"submitBtn\" class=\"submitBtn\" type=\"submit\">注册</button>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport routeMask from '../components/routeMask.vue'\r\nimport { onMounted, ref } from 'vue'\r\nimport request from '../axios'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus';\r\nconst router = useRouter();\r\n// const route = useRoute();\r\n// import { ElMessage } from 'element-plus'\r\n\r\nconst idValue = ref('')\r\nconst passwordValue = ref('')\r\nconst nameValue = ref('')\r\nconst titleValue = ref('')\r\nconst isIdUsed = ref(false)\r\n\r\nconst submitBtn = ref(null)\r\n\r\n// 防抖函数\r\nconst debounce = (fn, delay) => {\r\n    let timeoutId;\r\n    return (...args) => {\r\n      clearTimeout(timeoutId);\r\n      timeoutId = setTimeout(() => fn.apply(this, args), delay);\r\n    };\r\n  };\r\n\r\nconst login = () => {\r\n  idValue.value = ''\r\n  const routeMask = document.querySelector('#routeMask')\r\n  routeMask.classList.add('leave')\r\n  routeMask.classList.remove('waiting')\r\n  setTimeout(() => {\r\n    router.push('/login')\r\n  }, 200)\r\n}\r\n\r\nconst send = () => {\r\n  nameValue.value = nameValue.value.trim()\r\n  passwordValue.value = passwordValue.value.trim()\r\n  idValue.value = idValue.value.trim()\r\n  titleValue.value = titleValue.value.trim()\r\n\r\n  if (nameValue.value === '') {\r\n    const nameEle = document.querySelector('.name')\r\n    nameEle.classList.remove('hasValue')\r\n    nameEle.classList.add('error')\r\n    nameEle.querySelector('input').addEventListener('input', () => {\r\n      nameEle.classList.remove('error')\r\n    })\r\n  }\r\n  if (passwordValue.value === '') {\r\n    const passwordEle = document.querySelector('.password')\r\n    passwordEle.classList.remove('hasValue')\r\n    passwordEle.classList.add('error')\r\n    passwordEle.querySelector('input').addEventListener('input', () => {\r\n      passwordEle.classList.remove('error')\r\n    })\r\n  }\r\n  if (idValue.value === '') {\r\n    const idEle = document.querySelector('.id')\r\n    idEle.querySelector('span').innerHTML = '此项不能为空'\r\n    idEle.classList.remove('hasValue')\r\n    idEle.classList.add('error')\r\n    idEle.querySelector('input').addEventListener('input', () => {\r\n      idEle.classList.remove('error')\r\n    })\r\n  }\r\n\r\n  if (titleValue.value === '') {\r\n    const titleEle = document.querySelector('.title')\r\n    titleEle.classList.remove('hasValue')\r\n  }\r\n\r\n  if (nameValue.value === '' || passwordValue.value === '' || idValue.value === '' || isIdUsed.value) {\r\n    return\r\n  }\r\n\r\n  submitBtn.value.setAttribute('disabled', true)\r\n  submitBtn.value.innerHTML = '注册中...'\r\n\r\n  const req = new FormData()\r\n\r\n  req.append('id', idValue.value)\r\n  req.append('password', passwordValue.value)\r\n  req.append('name', nameValue.value)\r\n  req.append('title', titleValue.value)\r\n\r\n  request.post('/signup', req, {}).then(res => {\r\n    console.log(res)\r\n    if (res.code == 200) {\r\n      const routeMaskEle = document.querySelector('#routeMask')\r\n      routeMaskEle.classList.add('leave')\r\n      routeMaskEle.classList.remove('waiting')\r\n      ElMessage.success('注册成功')\r\n      setTimeout(() => {\r\n        router.push('/login')\r\n      }, 200)\r\n    }\r\n  }).finally(() => {\r\n    submitBtn.value.removeAttribute('disabled')\r\n    submitBtn.value.innerHTML = '注册'\r\n  })\r\n}\r\n\r\nonMounted(() => {\r\n  const inputs = document.querySelectorAll('.input')\r\n  inputs.forEach((input) => {\r\n    input.addEventListener('input', () => {\r\n      if (input.value !== '') {\r\n        input.parentElement.classList.add('hasValue')\r\n      } else {\r\n        input.parentElement.classList.remove('hasValue')\r\n      }\r\n    })\r\n  })\r\n\r\n  const idEle = document.querySelector('.id .input')\r\n  const errorEle = document.querySelector('.id span')\r\n  const checkIdAvailability = debounce(() => {\r\n    if (!idValue.value.trim()) {\r\n      errorEle.innerHTML = '此项不能为空';\r\n      return;\r\n    }\r\n    request.post('/checkIdUsed', { id: idValue.value }, {}).then(res => {\r\n      if (res.code === '501') {\r\n        errorEle.innerHTML = '此id已被使用';\r\n        idEle.parentElement.classList.remove('hasValue');\r\n        idEle.parentElement.classList.add('error');\r\n        isIdUsed.value = true;\r\n      } else {\r\n        errorEle.innerHTML = '此id可用';\r\n        idEle.parentElement.classList.remove('error');\r\n        isIdUsed.value = false;\r\n      }\r\n    });\r\n  }, 500);\r\n  idEle.addEventListener('input', checkIdAvailability);\r\n})\r\n\r\n</script>\r\n\r\n<style>\r\n.container,\r\n.el-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  width: 100%;\r\n}\r\n\r\n.inputBox {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: start;\r\n  width: 80%;\r\n  margin: 0.3em 0;\r\n\r\n  .input {\r\n    width: calc(100% - 2em);\r\n    height: 2.3em;\r\n    padding: 0 1em;\r\n    border-radius: 2em;\r\n    border: 0;\r\n    border-bottom: 5px solid rgb(169, 169, 169);\r\n    transition: all 0.3s ease-in-out;\r\n  }\r\n\r\n  span {\r\n    opacity: 0;\r\n    color: rgb(203, 66, 66);\r\n    font-size: 0.8em;\r\n    margin: 0.1em 0 0 0.5em;\r\n    transition: all 0.3s ease-in-out;\r\n  }\r\n\r\n  &.error {\r\n    .input {\r\n      border-color: rgb(203, 66, 66);\r\n    }\r\n\r\n    span {\r\n      opacity: 1;\r\n    }\r\n  }\r\n\r\n  &.hasValue {\r\n    .input {\r\n      border-color: rgb(98, 149, 110);\r\n    }\r\n  }\r\n}\r\n\r\nbutton {\r\n  width: 80%;\r\n  height: 3em;\r\n  border-radius: 2em;\r\n  margin: 0.8em 0;\r\n  background-color: rgb(98, 149, 110);\r\n  border: 2px solid rgb(98, 149, 110);\r\n  color: white;\r\n  cursor: pointer;\r\n\r\n  &.loginBtn {\r\n    margin-top: 3em;\r\n    background-color: rgba(214, 255, 224, 0.496);\r\n  }\r\n\r\n  &[disabled] {\r\n    background-color: rgba(179, 179, 179, 0.496) !important;\r\n    color: #454545 !important;\r\n    cursor: not-allowed !important;\r\n  }\r\n}\r\n</style>","import script from \"./signup.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./signup.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./signup.vue?vue&type=style&index=0&id=a4a91214&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","id","_createElementBlock","_hoisted_1","name","data","routeMaskEle","mounted","this","document","querySelector","setTimeout","classList","add","remove","__exports__","render","router","useRouter","idValue","ref","passwordValue","nameValue","titleValue","isIdUsed","submitBtn","debounce","fn","delay","timeoutId","args","clearTimeout","apply","login","value","routeMask","push","send","trim","nameEle","addEventListener","passwordEle","idEle","innerHTML","titleEle","setAttribute","req","FormData","append","request","post","then","res","console","log","code","ElMessage","success","finally","removeAttribute","onMounted","inputs","querySelectorAll","forEach","input","parentElement","errorEle","checkIdAvailability"],"sourceRoot":""}