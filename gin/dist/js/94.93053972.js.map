{"version":3,"file":"js/94.93053972.js","mappings":"4GAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,CAAM,C,8ECRVI,GAAG,a,0CAARC,EAAAA,EAAAA,IAEM,MAFNC,EAAoB,W,CAMtB,OACEC,KAAM,YACNC,IAAAA,GACE,MAAO,CACLC,aAAc,KAElB,EACAC,OAAAA,GACEC,KAAKF,aAAeG,SAASC,cAAc,cAC3CC,YAAW,KACTH,KAAKF,aAAaM,UAAUC,IAAI,SAChCF,YAAW,KACTH,KAAKF,aAAaM,UAAUC,IAAI,WAChCL,KAAKF,aAAaM,UAAUE,OAAO,QAAQ,GAC1C,IAAI,GACN,IACL,G,UChBF,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O,2QCmBA,MAAMC,GAAeC,EAAAA,EAAAA,IAAI,IACnBC,GAAgBD,EAAAA,EAAAA,IAAI,IAEpBE,GAAYF,EAAAA,EAAAA,IAAI,MAEhBG,EAAOA,KAKX,GAJAC,QAAQC,IAAI,QACZN,EAAaO,MAAQP,EAAaO,MAAMC,OACxCN,EAAcK,MAAQL,EAAcK,MAAMC,OAEf,KAAvBR,EAAaO,MAAc,CAC7B,MAAME,EAAajB,SAASC,cAAc,YAC1CgB,EAAWd,UAAUE,OAAO,YAC5BY,EAAWd,UAAUC,IAAI,SACzBa,EAAWhB,cAAc,SAASiB,iBAAiB,SAAS,KAC1DD,EAAWd,UAAUE,OAAO,QAAQ,GAExC,CACA,GAA4B,KAAxBK,EAAcK,MAAc,CAC9B,MAAMI,EAAcnB,SAASC,cAAc,aAC3CkB,EAAYhB,UAAUE,OAAO,YAC7Bc,EAAYhB,UAAUC,IAAI,SAC1Be,EAAYlB,cAAc,SAASiB,iBAAiB,SAAS,KAC3DC,EAAYhB,UAAUE,OAAO,QAAQ,GAEzC,CAEA,GAA2B,KAAvBG,EAAaO,MACf,OAGFJ,EAAUI,MAAMK,aAAa,YAAY,GACzCT,EAAUI,MAAMM,UAAY,SAE5B,MAAMC,EAAM,IAAIC,SAEhBD,EAAIE,OAAO,UAAWhB,EAAaO,OACnCO,EAAIE,OAAO,WAAYd,EAAcK,OACrCO,EAAIE,OAAO,KAAM,KAEjBC,EAAAA,EAAQC,KAAK,WAAYJ,EAAK,CAAC,GAAGK,MAAKC,IAErC,GADAf,QAAQC,IAAIc,GACI,OAAZA,EAAIC,KAAe,CACrB,MAAMhC,EAAeG,SAASC,cAAc,cAC5CJ,EAAaM,UAAUC,IAAI,SAC3BP,EAAaM,UAAUE,OAAO,UAChC,MACEyB,EAAAA,GAAUC,QAAQ,aACpB,IACCC,SAAQ,KACTrB,EAAUI,MAAMkB,gBAAgB,YAChCtB,EAAUI,MAAMM,UAAY,IAAI,GAChC,E,OAGJa,EAAAA,EAAAA,KAAU,KACR,MAAMC,EAASnC,SAASoC,iBAAiB,UACzCD,EAAOE,SAASC,IACdA,EAAMpB,iBAAiB,SAAS,KACV,KAAhBoB,EAAMvB,MACRuB,EAAMC,cAAcpC,UAAUC,IAAI,YAElCkC,EAAMC,cAAcpC,UAAUE,OAAO,WACvC,GACA,GACF,I,mvBCxFJ,MAAMC,EAAc,EAEpB,O","sources":["webpack://chatroom/./node_modules/vue-loader/dist/exportHelper.js","webpack://chatroom/./src/components/routeMask.vue","webpack://chatroom/./src/components/routeMask.vue?d00e","webpack://chatroom/./src/views/address.vue","webpack://chatroom/./src/views/address.vue?7efb"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","<template>\r\n  <div id=\"routeMask\">\r\n    加载中...\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'routeMask',\r\n  data() {\r\n    return {\r\n      routeMaskEle: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.routeMaskEle = document.querySelector('#routeMask')\r\n    setTimeout(() => {\r\n      this.routeMaskEle.classList.add('enter')\r\n      setTimeout(() => {\r\n        this.routeMaskEle.classList.add('waiting')\r\n        this.routeMaskEle.classList.remove('enter')\r\n      }, 300)\r\n    }, 100)\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#routeMask {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #2d2d2d;\r\n  z-index: 99;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color: white;\r\n\r\n  &.enter {\r\n    transition: all 0.1s ease-in-out;\r\n    right: 100%;\r\n  }\r\n\r\n  &.waiting {\r\n    right: -100%;\r\n  }\r\n\r\n  &.leave {\r\n    transition: all 0.1s ease-in-out;\r\n    right: 0;\r\n  }\r\n}\r\n</style>","import { render } from \"./routeMask.vue?vue&type=template&id=eec74f86\"\nimport script from \"./routeMask.vue?vue&type=script&lang=js\"\nexport * from \"./routeMask.vue?vue&type=script&lang=js\"\n\nimport \"./routeMask.vue?vue&type=style&index=0&id=eec74f86&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- eslint-disable vue/multi-word-component-names -->\r\n<template>\r\n  <routeMask />\r\n  <div class=\"container\">\r\n    <h1>欢迎来到聊天室</h1>\r\n    <el-form @submit.prevent=\"send\">\r\n      <div class=\"inputBox address\">\r\n        <input v-model=\"addressValue\" class=\"input\" placeholder=\"请输入聊天室的网络地址\" />\r\n        <span>此项不能为空</span>\r\n      </div>\r\n      <div class=\"inputBox password\">\r\n        <input v-model=\"passwordValue\" class=\"input\" placeholder=\"请输入聊天室的密码\" />\r\n        <span>警告：此聊天室没有设置密码</span>\r\n      </div>\r\n      <button ref=\"submitBtn\" class=\"submitBtn\" type=\"submit\">确定</button>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport routeMask from '../components/routeMask.vue'\r\n\r\nimport { onMounted, ref } from 'vue'\r\nimport request from '../axios'\r\n// import { useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus';\r\n// const router = useRouter();\r\n\r\nconst addressValue = ref('')\r\nconst passwordValue = ref('')\r\n\r\nconst submitBtn = ref(null)\r\n\r\nconst send = () => {\r\n  console.log('send')\r\n  addressValue.value = addressValue.value.trim()\r\n  passwordValue.value = passwordValue.value.trim()\r\n\r\n  if (addressValue.value === '') {\r\n    const addressEle = document.querySelector('.address')\r\n    addressEle.classList.remove('hasValue')\r\n    addressEle.classList.add('error')\r\n    addressEle.querySelector('input').addEventListener('input', () => {\r\n      addressEle.classList.remove('error')\r\n    })\r\n  }\r\n  if (passwordValue.value === '') {\r\n    const passwordEle = document.querySelector('.password')\r\n    passwordEle.classList.remove('hasValue')\r\n    passwordEle.classList.add('error')\r\n    passwordEle.querySelector('input').addEventListener('input', () => {\r\n      passwordEle.classList.remove('error')\r\n    })\r\n  }\r\n\r\n  if (addressValue.value === '') {\r\n    return\r\n  }\r\n\r\n  submitBtn.value.setAttribute('disabled', true)\r\n  submitBtn.value.innerHTML = '连接中...'\r\n\r\n  const req = new FormData()\r\n\r\n  req.append('address', addressValue.value)\r\n  req.append('password', passwordValue.value)\r\n  req.append('db', '0')\r\n\r\n  request.post('/address', req, {}).then(res => {\r\n    console.log(res)\r\n    if (res.code == '200') {\r\n      const routeMaskEle = document.querySelector('#routeMask')\r\n      routeMaskEle.classList.add('leave')\r\n      routeMaskEle.classList.remove('waiting')\r\n    } else {\r\n      ElMessage.warning('聊天室地址或密码错误')\r\n    }\r\n  }).finally(() => {\r\n    submitBtn.value.removeAttribute('disabled')\r\n    submitBtn.value.innerHTML = '确定'\r\n  })\r\n}\r\n\r\nonMounted(() => {\r\n  const inputs = document.querySelectorAll('.input')\r\n  inputs.forEach((input) => {\r\n    input.addEventListener('input', () => {\r\n      if (input.value !== '') {\r\n        input.parentElement.classList.add('hasValue')\r\n      } else {\r\n        input.parentElement.classList.remove('hasValue')\r\n      }\r\n    })\r\n  })\r\n})\r\n\r\n</script>\r\n\r\n<style>\r\n.container,\r\n.el-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  width: 100%;\r\n}\r\n\r\n.inputBox {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: start;\r\n  width: 80%;\r\n  margin: 0.3em 0;\r\n\r\n  .input {\r\n    width: calc(100% - 2em);\r\n    height: 2.3em;\r\n    padding: 0 1em;\r\n    border-radius: 2em;\r\n    border: 0;\r\n    border-bottom: 5px solid rgb(169, 169, 169);\r\n    transition: all 0.3s ease-in-out;\r\n  }\r\n\r\n  span {\r\n    opacity: 0;\r\n    color: rgb(203, 66, 66);\r\n    font-size: 0.8em;\r\n    margin: 0.1em 0 0 0.5em;\r\n    transition: all 0.3s ease-in-out;\r\n  }\r\n\r\n  &.error {\r\n    .input {\r\n      border-color: rgb(203, 66, 66);\r\n    }\r\n\r\n    span {\r\n      opacity: 1;\r\n    }\r\n  }\r\n\r\n  &.hasValue {\r\n    .input {\r\n      border-color: rgb(98, 149, 110);\r\n    }\r\n  }\r\n}\r\n\r\nbutton {\r\n  width: 80%;\r\n  height: 3em;\r\n  border-radius: 2em;\r\n  margin: 0.8em 0;\r\n  background-color: rgb(98, 149, 110);\r\n  border: 2px solid rgb(98, 149, 110);\r\n  color: white;\r\n  cursor: pointer;\r\n\r\n  &[disabled] {\r\n    background-color: rgba(179, 179, 179, 0.496) !important;\r\n    color: #454545 !important;\r\n    cursor: not-allowed !important;\r\n  }\r\n}\r\n</style>","import script from \"./address.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./address.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./address.vue?vue&type=style&index=0&id=231a851a&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","id","_createElementBlock","_hoisted_1","name","data","routeMaskEle","mounted","this","document","querySelector","setTimeout","classList","add","remove","__exports__","render","addressValue","ref","passwordValue","submitBtn","send","console","log","value","trim","addressEle","addEventListener","passwordEle","setAttribute","innerHTML","req","FormData","append","request","post","then","res","code","ElMessage","warning","finally","removeAttribute","onMounted","inputs","querySelectorAll","forEach","input","parentElement"],"sourceRoot":""}